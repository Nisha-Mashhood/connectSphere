{"version":3,"file":"call.repositry.js","sourceRoot":"","sources":["../../src/repositories/call.repositry.ts"],"names":[],"mappings":"AAAA,OAAO,EAAQ,SAAS,EAAE,MAAM,yBAAyB,CAAC;AAGxD,MAAM,CAAC,MAAM,MAAM,GAAG,KAAK,EAAC,IAAkC,EAAiB,EAAE;IAC/E,OAAO,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAClC,CAAC,CAAA;AAGC,MAAM,CAAC,MAAM,aAAa,GAAG,KAAK,EAAC,OAAe,EAAE,QAAgB,EAAE,EAAmB,EAAE;IACzF,OAAO,SAAS,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,CAAC;SAC/B,IAAI,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC;SACvB,KAAK,CAAC,KAAK,CAAC;SACZ,IAAI,EAAE,CAAC;AACZ,CAAC,CAAA;AAED,MAAM,CAAC,MAAM,YAAY,GAAG,KAAK,EAAE,MAAc,EAAE,QAAgB,EAAE,EAAmB,EAAE;IACxF,OAAO,SAAS,CAAC,IAAI,CAAC;QACpB,GAAG,EAAE,CAAC,EAAE,QAAQ,EAAE,MAAM,EAAE,EAAE,EAAE,WAAW,EAAE,MAAM,EAAE,CAAC;KACrD,CAAC;SACC,IAAI,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC;SACvB,KAAK,CAAC,KAAK,CAAC;SACZ,IAAI,EAAE,CAAC;AACZ,CAAC,CAAA","sourcesContent":["import { Call, CallModel } from \"../models/call.modal.js\";\r\n\r\n\r\n  export const create = async(call: Omit<Call, \"_id\" | \"CallId\">): Promise<Call >=> {\r\n    return CallModel.create(call);\r\n}\r\n\r\n\r\n  export const findByChatKey = async(chatKey: string, limit: number = 50): Promise<Call[]> =>{\r\n    return CallModel.find({ chatKey })\r\n      .sort({ timestamp: -1 })\r\n      .limit(limit)\r\n      .exec();\r\n  }\r\n\r\n  export const findByUserId = async (userId: string, limit: number = 50): Promise<Call[]> => {\r\n    return CallModel.find({\r\n      $or: [{ callerId: userId }, { recipientId: userId }],\r\n    })\r\n      .sort({ timestamp: -1 })\r\n      .limit(limit)\r\n      .exec();\r\n  }\r\n"]}