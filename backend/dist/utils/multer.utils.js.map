{"version":3,"file":"multer.utils.js","sourceRoot":"","sources":["../../src/utils/multer.utils.ts"],"names":[],"mappings":"AAAA,OAAO,MAAM,MAAM,QAAQ,CAAC;AAC5B,OAAO,IAAI,MAAM,MAAM,CAAC;AAExB,4BAA4B;AAC5B,MAAM,OAAO,GAAG,MAAM,CAAC,WAAW,CAAC;IACjC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE;QAC/B,EAAE,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC,CAAC,2BAA2B;IACnD,CAAC;IACD,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE;QAC3B,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,gCAAgC;IAClF,CAAC;CACF,CAAC,CAAC;AAEH,uBAAuB;AACvB,MAAM,UAAU,GAAG,CAAC,IAAS,EAAE,IAAS,EAAE,EAAO,EAAE,EAAE;IACnD,MAAM,gBAAgB,GAAG,cAAc,CAAC;IACxC,MAAM,OAAO,GAAG,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC;IACrF,MAAM,QAAQ,GAAG,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAEtD,IAAI,OAAO,IAAI,QAAQ,EAAE,CAAC;QACxB,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IACjB,CAAC;SAAM,CAAC;QACN,EAAE,CAAC,IAAI,KAAK,CAAC,yDAAyD,CAAC,CAAC,CAAC;IAC3E,CAAC;AACH,CAAC,CAAC;AAEF,uBAAuB;AACvB,MAAM,CAAC,MAAM,MAAM,GAAG,MAAM,CAAC;IAC3B,OAAO;IACP,UAAU;IACV,MAAM,EAAE,EAAE,QAAQ,EAAE,CAAC,GAAG,IAAI,GAAG,IAAI,EAAE,EAAE,uBAAuB;CAC/D,CAAC,CAAC","sourcesContent":["import multer from 'multer';\r\nimport path from \"path\";\r\n\r\n// Define storage for multer\r\nconst storage = multer.diskStorage({\r\n  destination: (_req, _file, cb) => {\r\n    cb(null, \"uploads/\"); // Temporary storage folder\r\n  },\r\n  filename: (_req, file, cb) => {\r\n    cb(null, Date.now() + \"-\" + file.originalname); // Append timestamp to file name\r\n  },\r\n});\r\n\r\n// File type validation\r\nconst fileFilter = (_req: any, file: any, cb: any) => {\r\n  const allowedFileTypes = /jpeg|jpg|png/;\r\n  const extname = allowedFileTypes.test(path.extname(file.originalname).toLowerCase());\r\n  const mimetype = allowedFileTypes.test(file.mimetype);\r\n\r\n  if (extname && mimetype) {\r\n    cb(null, true);\r\n  } else {\r\n    cb(new Error(\"Invalid file type. Only JPEG, JPG, and PNG are allowed.\"));\r\n  }\r\n};\r\n\r\n// Multer configuration\r\nexport const upload = multer({\r\n  storage,\r\n  fileFilter,\r\n  limits: { fileSize: 5 * 1024 * 1024 }, // File size limit: 5MB\r\n});\r\n\r\n"]}