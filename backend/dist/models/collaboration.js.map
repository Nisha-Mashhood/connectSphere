{"version":3,"file":"collaboration.js","sourceRoot":"","sources":["../../src/models/collaboration.ts"],"names":[],"mappings":"AAAA,OAAO,QAAQ,EAAE,EAAE,MAAM,EAAY,MAAM,UAAU,CAAC;AA2CtD,gEAAgE;AAChE,MAAM,mBAAmB,GAAW,IAAI,MAAM,CAC5C;IACE,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE;IACxE,MAAM,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACpE,YAAY,EAAE;QACZ;YACE,GAAG,EAAE;gBACH,IAAI,EAAE,MAAM;gBACZ,IAAI,EAAE;oBACJ,QAAQ;oBACR,QAAQ;oBACR,SAAS;oBACT,WAAW;oBACX,UAAU;oBACV,QAAQ;oBACR,UAAU;iBACX;aACF;YACD,SAAS,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;SAC9B;KACF;IACD,eAAe,EAAE;QACf;YACE,eAAe,EAAE;gBACf;oBACE,IAAI,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE;oBACpB,MAAM,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE;iBACzB;aACF;YACD,WAAW,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,MAAM,EAAE,QAAQ,CAAC,EAAE;YACvD,WAAW,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE;YAC5C,UAAU,EAAE;gBACV,IAAI,EAAE,MAAM;gBACZ,IAAI,EAAE,CAAC,SAAS,EAAE,UAAU,EAAE,UAAU,CAAC;gBACzC,OAAO,EAAE,SAAS;aACnB;YACD,YAAY,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE;SAC9C;KACF;IACD,oBAAoB,EAAE;QACpB;YACE,gBAAgB,EAAE;gBAChB;oBACE,IAAI,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE;oBACpB,YAAY,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;iBACjC;aACF;YACD,WAAW,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,MAAM,EAAE,QAAQ,CAAC,EAAE;YACvD,WAAW,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE;YAC5C,UAAU,EAAE;gBACV,IAAI,EAAE,MAAM;gBACZ,IAAI,EAAE,CAAC,SAAS,EAAE,UAAU,EAAE,UAAU,CAAC;gBACzC,OAAO,EAAE,SAAS;aACnB;YACD,YAAY,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE;SAC9C;KACF;IACD,OAAO,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE;IAC1C,WAAW,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE;IAC9C,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACvC,SAAS,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,CAAC,GAAG,EAAE;IAC5D,OAAO,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE;IACtC,aAAa,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE;CACjD,EACD,EAAE,UAAU,EAAE,IAAI,EAAE,CACrB,CAAC;AAEF,eAAe,QAAQ,CAAC,KAAK,CAC3B,eAAe,EACf,mBAAmB,CACpB,CAAC","sourcesContent":["import mongoose, { Schema, Document } from \"mongoose\";\r\nimport { IMentor } from \"./mentor.model.js\";\r\nimport { UserInterface } from \"./user.model.js\";\r\n\r\nexport interface ICollaboration extends Document {\r\n  mentorId: IMentor | string;\r\n  userId: UserInterface | string;\r\n  selectedSlot: {\r\n    day:\r\n      | \"Sunday\"\r\n      | \"Monday\"\r\n      | \"Tuesday\"\r\n      | \"Wednesday\"\r\n      | \"Thursday\"\r\n      | \"Friday\"\r\n      | \"Saturday\";\r\n    timeSlots: string[];\r\n  }[];\r\n  unavailableDays: {\r\n    _id: mongoose.Types.ObjectId;\r\n    datesAndReasons: { date: Date; reason: string }[];\r\n    requestedBy: \"user\" | \"mentor\";\r\n    requesterId: mongoose.Types.ObjectId;\r\n    isApproved: \"pending\" | \"approved\" | \"rejected\";\r\n    approvedById: mongoose.Types.ObjectId;\r\n  }[];\r\n  temporarySlotChanges: {\r\n    _id: mongoose.Types.ObjectId;\r\n    datesAndNewSlots: { date: Date; newTimeSlots: string[] }[];\r\n    requestedBy: \"user\" | \"mentor\";\r\n    requesterId: mongoose.Types.ObjectId;\r\n    isApproved: \"pending\" | \"approved\" | \"rejected\";\r\n    approvedById: mongoose.Types.ObjectId;\r\n  }[];\r\n  price: number;\r\n  payment: boolean;\r\n  isCancelled: boolean;\r\n  startDate: Date;\r\n  endDate?: Date;\r\n  feedbackGiven: boolean;\r\n  createdAt: Date;\r\n}\r\n\r\n// Schema remains the same, just ensure it matches the interface\r\nconst CollaborationSchema: Schema = new Schema(\r\n  {\r\n    mentorId: { type: Schema.Types.ObjectId, ref: \"Mentor\", required: true },\r\n    userId: { type: Schema.Types.ObjectId, ref: \"User\", required: true },\r\n    selectedSlot: [\r\n      {\r\n        day: {\r\n          type: String,\r\n          enum: [\r\n            \"Sunday\",\r\n            \"Monday\",\r\n            \"Tuesday\",\r\n            \"Wednesday\",\r\n            \"Thursday\",\r\n            \"Friday\",\r\n            \"Saturday\",\r\n          ],\r\n        },\r\n        timeSlots: [{ type: String }],\r\n      },\r\n    ],\r\n    unavailableDays: [\r\n      {\r\n        datesAndReasons: [\r\n          {\r\n            date: { type: Date },\r\n            reason: { type: String },\r\n          },\r\n        ],\r\n        requestedBy: { type: String, enum: [\"user\", \"mentor\"] },\r\n        requesterId: { type: Schema.Types.ObjectId },\r\n        isApproved: {\r\n          type: String,\r\n          enum: [\"pending\", \"approved\", \"rejected\"],\r\n          default: \"pending\",\r\n        },\r\n        approvedById: { type: Schema.Types.ObjectId },\r\n      },\r\n    ],\r\n    temporarySlotChanges: [\r\n      {\r\n        datesAndNewSlots: [\r\n          {\r\n            date: { type: Date },\r\n            newTimeSlots: [{ type: String }],\r\n          },\r\n        ],\r\n        requestedBy: { type: String, enum: [\"user\", \"mentor\"] },\r\n        requesterId: { type: Schema.Types.ObjectId },\r\n        isApproved: {\r\n          type: String,\r\n          enum: [\"pending\", \"approved\", \"rejected\"],\r\n          default: \"pending\",\r\n        },\r\n        approvedById: { type: Schema.Types.ObjectId },\r\n      },\r\n    ],\r\n    payment: { type: Boolean, default: false },\r\n    isCancelled: { type: Boolean, default: false },\r\n    price: { type: Number, required: true },\r\n    startDate: { type: Date, required: true, default: Date.now },\r\n    endDate: { type: Date, default: null },\r\n    feedbackGiven: { type: Boolean, default: false },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nexport default mongoose.model<ICollaboration>(\r\n  \"Collaboration\",\r\n  CollaborationSchema\r\n);\r\n"]}