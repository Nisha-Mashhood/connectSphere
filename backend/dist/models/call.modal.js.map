{"version":3,"file":"call.modal.js","sourceRoot":"","sources":["../../src/models/call.modal.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,UAAU,CAAC;AAYzC,MAAM,UAAU,GAAG,IAAI,MAAM,CAAO;IAClC,OAAO,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;IACtD,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC1C,WAAW,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC7C,IAAI,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE;IAChE,MAAM,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,UAAU,EAAE,UAAU,EAAE,QAAQ,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE;IAClF,SAAS,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,CAAC,GAAG,EAAE;CAC7C,CAAC,CAAC;AAEH,UAAU,CAAC,KAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;AAEhD,MAAM,CAAC,MAAM,SAAS,GAAG,KAAK,CAAO,MAAM,EAAE,UAAU,CAAC,CAAC","sourcesContent":["import { Schema, model } from 'mongoose';\r\n\r\nexport interface Call {\r\n    _id: string;\r\n    chatKey: string; // e.g., user-user_<userConnectionId>, user-mentor_<collaborationId>\r\n    callerId: string;\r\n    recipientId: string;\r\n    type: 'audio' | 'video';\r\n    status: 'incoming' | 'answered' | 'missed';\r\n    timestamp: Date;\r\n  }\r\n\r\nconst CallSchema = new Schema<Call>({\r\n  chatKey: { type: String, required: true, index: true },\r\n  callerId: { type: String, required: true },\r\n  recipientId: { type: String, required: true },\r\n  type: { type: String, enum: ['audio', 'video'], required: true },\r\n  status: { type: String, enum: ['incoming', 'answered', 'missed'], required: true },\r\n  timestamp: { type: Date, default: Date.now },\r\n});\r\n\r\nCallSchema.index({ chatKey: 1, timestamp: -1 });\r\n\r\nexport const CallModel = model<Call>('Call', CallSchema);"]}