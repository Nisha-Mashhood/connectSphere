{"version":3,"file":"category.controller.js","sourceRoot":"","sources":["../../src/controllers/category.controller.ts"],"names":[],"mappings":"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","sourcesContent":["import { Request, Response } from \"express\";\r\nimport * as CategoryService from \"../services/category.service.js\";\r\n\r\nexport const createCategory = async (req: Request, res: Response): Promise<void> => {\r\n  try {\r\n    const imagePath = req.file?.path; \r\n    // console.log(req.body);\r\n    // console.log(imagePath);\r\n\r\n    const isDuplicate = await CategoryService.isDuplicateCategoryName(req.body.name);\r\n    if (isDuplicate) {\r\n      res.status(400).json({ message: \"Category name already exists\" });\r\n      return;\r\n    }\r\n    const category = await CategoryService.createCategory(req.body, imagePath);\r\n    res.status(201).json({ message: \"Category created successfully\", category });\r\n  } catch (error: any) {\r\n    res.status(500).json({ message: \"Error creating category\", error: error.message });\r\n  }\r\n};\r\n\r\nexport const getAllCategories = async (_: Request, res: Response): Promise<void> => {\r\n  try {\r\n    const categories = await CategoryService.getAllCategories();\r\n    res.status(200).json(categories);\r\n  } catch (error: any) {\r\n    res.status(500).json({ message: \"Error fetching categories\", error: error.message });\r\n  }\r\n};\r\n\r\nexport const getCategoryById = async (req: Request<{ id: string }>, res: Response): Promise<void> => {\r\n  try {\r\n    const category = await CategoryService.getCategoryById(req.params.id);\r\n    if (!category) {\r\n      res.status(404).json({ message: \"Category not found\" });\r\n      return;\r\n    }\r\n    res.status(200).json(category);\r\n  } catch (error: any) {\r\n    res.status(500).json({ message: \"Error fetching category\", error: error.message });\r\n  }\r\n};\r\n\r\nexport const updateCategory = async (req: Request<{ id: string }>, res: Response): Promise<void> => {\r\n  try {\r\n    const imagePath = req.file?.path;\r\n    // console.log(req.body);\r\n    // console.log(imagePath);\r\n    const isDuplicate = await CategoryService.isDuplicateCategoryName(req.body.name, req.params.id);\r\n    if (isDuplicate) {\r\n      res.status(400).json({ message: \"Category name already exists\" });\r\n      return;\r\n    }\r\n    const updatedCategory = await CategoryService.updateCategory(req.params.id, req.body, imagePath);\r\n    if (!updatedCategory) {\r\n      res.status(404).json({ message: \"Category not found\" });\r\n      return;\r\n    }\r\n    res.status(200).json({ message: \"Category updated successfully\", updatedCategory });\r\n  } catch (error: any) {\r\n    res.status(500).json({ message: \"Error updating category\", error: error.message });\r\n  }\r\n};\r\n\r\nexport const deleteCategory = async (req: Request<{ id: string }>, res: Response): Promise<void> => {\r\n  try {\r\n    const deletedCategory = await CategoryService.deleteCategory(req.params.id);\r\n    if (!deletedCategory) {\r\n      res.status(404).json({ message: \"Category not found\" });\r\n      return;\r\n    }\r\n    res.status(200).json({ message: \"Category deleted successfully\" });\r\n  } catch (error: any) {\r\n    res.status(500).json({ message: \"Error deleting category\", error: error.message });\r\n  }\r\n};\r\n\r\n"]}